echo "ğŸ” Running pre-commit hook to check the code looks good... ğŸ”"

# Add common Node.js paths to PATH
export PATH="$PATH:/usr/local/bin:/opt/homebrew/bin:$HOME/.local/bin"

# Ensure Node.js is available
if ! command -v node >/dev/null 2>&1; then
  echo "âŒ Node.js not found! Please ensure Node.js is installed and available in PATH."
  exit 1
fi

# Ensure `pnpm` is available
echo "Checking if pnpm is available..."
if ! command -v pnpm >/dev/null 2>&1; then
  echo "âŒ pnpm not found! Please ensure pnpm is installed and available in PATH."
  exit 1
fi

# Run typecheck
echo "Running typecheck..."
if ! pnpm typecheck; then
  echo "âŒ Type checking failed! Please review TypeScript types."
  echo "Once you're done, don't forget to add your changes to the commit! ğŸš€"
  exit 1
fi

# Run lint
echo "Running lint..."
if ! pnpm lint; then
  echo "âŒ Linting failed! Run 'pnpm lint:fix' to fix the easy issues."
  echo "Once you're done, don't forget to add your beautification to the commit! ğŸ¤©"
  exit 1
fi

echo "ğŸ‘ All checks passed! Committing changes..."